<link rel="stylesheet" href="/css/home.css" />

<main class="container blog">
  <div class="blog__header">
    <h1 class="blog__title">Welcome to the Blog</h1>

    <a href="/posts/new" class="blog__create-btn"> Create New Post </a>
  </div>

  <?php if (isset($posts) && count($posts) > 0): ?>
  <div class="posts">
    <?php foreach ($posts as $post): ?>
    <a
      href="/posts/<?php echo htmlspecialchars($post['id']); ?>"
      class="post-card"
    >
      <div class="post-card__header">
        <h2 class="post-card__title">
          <?php echo htmlspecialchars($post['title']); ?>
        </h2>
        <p class="post-card__date">
          <?php echo date('F j, Y', strtotime($post['created_at'])); ?>
        </p>

        <form
          data-slot="card-action"
          action="/posts/<?php echo htmlspecialchars($post['id']); ?>/delete"
          method="post"
          class="post-card__delete-form"
        >
          <button type="submit" class="post-card__delete-btn">D</button>
        </form>
      </div>

      <div class="post-card__content">
        <p class="post-card__text">
          <?php echo htmlspecialchars($post['content']); ?>
        </p>
      </div>
    </a>
    <?php endforeach; ?>
  </div>
  <?php else: ?>
  <p class="blog__no-posts">No posts available.</p>
  <?php endif; ?>
</main>
